# ğŸ¯ Gamble Comment Detector

<p align="center">
  <img src="https://img.shields.io/badge/Python-3.8+-blue.svg" alt="Python Version">
  <img src="https://img.shields.io/badge/FastAPI-0.68+-green.svg" alt="FastAPI">
  <img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="MIT License">
  <img src="https://img.shields.io/badge/MLOps-Automated-orange.svg" alt="MLOps">
  <img src="https://img.shields.io/badge/CI%2FCD-GitHub%20Actions-brightgreen.svg" alt="GitHub Actions">
  <img src="https://img.shields.io/badge/Deploy-HuggingFace-yellow.svg" alt="Hugging Face">
  <img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg" alt="PRs Welcome">
</p>

<p align="center">
  <em>An intelligent machine learning system with automated MLOps pipeline for detecting gambling-related content in user comments using natural language processing techniques.</em>
</p>

---

## âœ¨ Features

- **ğŸ¤– Smart Detection**: Advanced ML model trained to identify gambling-related comments with high accuracy
- **âš¡ Fast API**: Lightning-fast REST API built with FastAPI for real-time inference
- **ğŸ”„ Automated ML Pipeline**: Complete MLOps workflow with GitHub Actions for training, evaluation, and deployment
- **ğŸ“Š Model Evaluation**: Comprehensive evaluation metrics and performance monitoring with automated reporting
- **ğŸš€ Auto-Deployment**: Seamless deployment to Hugging Face Spaces with every model update
- **ğŸ› ï¸ Development Tools**: Complete pipeline with training, evaluation, and inference capabilities
- **ğŸ“ˆ Scalable Architecture**: Modular design supporting easy model updates and improvements

---

## ğŸ”„ Automated ML Pipeline (MLOps)

This project implements a complete **MLOps pipeline** using GitHub Actions that automatically handles the entire machine learning lifecycle:

### ğŸ—ï¸ Pipeline Architecture

```mermaid
graph TD
    A[Code Push to Main] --> B[GitHub Actions Trigger]
    B --> C[Setup Environment]
    C --> D{Data Exists?}
    D -->|No| E[Generate Dummy Data]
    D -->|Yes| F[Skip Data Generation]
    E --> G[Model Training]
    F --> G
    G --> H[Model Evaluation]
    H --> I[Save Model Artifacts]
    I --> J[Commit to Repository]
    J --> K[Deploy to Hugging Face Spaces]
    K --> L[ğŸ‰ Production Ready]
```

### âš™ï¸ Pipeline Stages

| Stage | Description | Tools Used |
|-------|-------------|------------|
| **ğŸ”§ Environment Setup** | Python 3.9, dependencies installation | `setup-python@v4`, `pip` |
| **ğŸ“Š Data Management** | Auto-generate dummy data if missing | Custom Python script |
| **ğŸ‹ï¸ Model Training** | Train ML model with latest data | `scikit-learn`, `joblib` |
| **ğŸ“ˆ Model Evaluation** | Generate performance metrics and reports | Custom evaluation script |
| **ğŸ’¾ Artifact Management** | Version control for model files | Git commits, `upload-artifact@v4` |
| **ğŸš€ Auto Deployment** | Deploy to Hugging Face Spaces | Git LFS, HF Spaces API |

### ğŸ¯ Pipeline Triggers

- **ğŸ”„ Automatic**: Every push to `main` branch
- **ğŸ® Manual**: Workflow dispatch for on-demand runs
- **ğŸ“… Scheduled**: Can be configured for periodic retraining

### ğŸ›¡ï¸ Pipeline Benefits

- **ğŸ”’ Reproducibility**: Consistent environment and versioning
- **âš¡ Fast Iteration**: Automated testing and deployment
- **ğŸ“Š Monitoring**: Built-in evaluation and reporting
- **ğŸ”„ Continuous Integration**: Seamless model updates
- **ğŸš€ Zero-Downtime Deployment**: Automatic production updates

---

## ğŸš€ Quick Start

### Prerequisites

Ensure you have the following installed:
- **Python 3.8+**
- **pip** (Python package manager)

### Installation

1. **Clone the repository**
   ```bash
   git clone https://github.com/minggo-commits/gamble-comment-detector.git
   cd gamble-comment-detector
   ```

2. **Create a virtual environment** (recommended)
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```

3. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```

### Usage

#### ğŸ”¥ Start the API Server
```bash
python app.py
```

The API will be available at `http://localhost:8000`

#### ğŸ“ API Documentation
Once the server is running, visit:
- **Interactive API Docs**: `http://localhost:8000/docs`
- **ReDoc Documentation**: `http://localhost:8000/redoc`

#### ğŸ§ª Make Predictions
```bash
curl -X POST "http://localhost:8000/predict" \
     -H "Content-Type: application/json" \
     -d '{"text": "Your comment text here"}'
```

#### ğŸ‹ï¸ Manual Model Training
```bash
python src/train.py
```

#### ğŸ“Š Manual Model Evaluation
```bash
python src/evaluate.py
```

---

## ğŸ—ï¸ Project Structure

```
gamble-comment-detector/
â”œâ”€â”€ ğŸ“ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ pipeline.yml   # ğŸ”„ MLOps Pipeline Configuration
â”œâ”€â”€ ğŸ“ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ main.py            # FastAPI application
â”œâ”€â”€ ğŸ“ data/
â”‚   â””â”€â”€ comments.csv       # Training dataset
â”œâ”€â”€ ğŸ“ model/
â”‚   â”œâ”€â”€ eval_report.json   # ğŸ“Š Automated evaluation metrics
â”‚   â”œâ”€â”€ saved_model.joblib # ğŸ¤– Auto-generated ML model
â”‚   â””â”€â”€ vectorizer.joblib  # ğŸ“ Auto-generated text vectorizer
â”œâ”€â”€ ğŸ“ notebooks/
â”‚   â””â”€â”€ Baseline.ipynb     # Jupyter notebook for experimentation
â”œâ”€â”€ ğŸ“ scripts/
â”‚   â””â”€â”€ generate_dummy_data.py  # ğŸ”„ Auto data generation
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ evaluate.py        # ğŸ“ˆ Automated model evaluation
â”‚   â”œâ”€â”€ inference.py       # Prediction logic
â”‚   â”œâ”€â”€ preprocessing.py   # Data preprocessing
â”‚   â””â”€â”€ train.py          # ğŸ‹ï¸ Automated model training
â”œâ”€â”€ app.py                # Main application entry point
â”œâ”€â”€ requirements.txt      # Python dependencies
â””â”€â”€ README.md            # This file
```

---

## ğŸ”§ API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/predict` | Analyze a single comment |
| `POST` | `/predict/batch` | Analyze multiple comments |
| `GET` | `/health` | Health check endpoint |
| `GET` | `/model/info` | Get model information and version |

### Example API Usage

**Single Prediction:**
```json
POST /predict
{
    "text": "I just won big at the casino last night!"
}

Response:
{
    "is_gambling": true,
    "confidence": 0.87,
    "model_version": "v1.2.3",
    "timestamp": "2024-01-15T10:30:00Z"
}
```

---

## ğŸ§  Model Information

- **Algorithm**: Logistic Regression with TF-IDF vectorization
- **Features**: Text preprocessing with stop word removal and stemming
- **Auto-Training**: Triggered on every code push to main branch
- **Performance** (Latest Pipeline Run): 
  - Accuracy: 92%
  - Precision: 89%
  - Recall: 94%
  - F1-Score: 91%

---

## ğŸ”„ MLOps Workflow Details

### GitHub Actions Pipeline Configuration

The automated pipeline (`pipeline.yml`) includes:

```yaml
# Key Pipeline Steps
1. ğŸ”§ Environment Setup (Python 3.9)
2. ğŸ“¦ Dependency Installation
3. ğŸ“Š Smart Data Management
4. ğŸ‹ï¸ Automated Model Training
5. ğŸ“ˆ Performance Evaluation
6. ğŸ’¾ Model Artifact Versioning
7. ğŸš€ Auto-Deployment to HF Spaces
```

### ğŸ¯ Pipeline Features

- **ğŸ” Smart Data Handling**: Auto-generates dummy data if training data is missing
- **ğŸ”’ Version Control**: Automatic commits of model artifacts with `[skip ci]` tags
- **ğŸ“Š Evaluation Reports**: JSON reports uploaded as GitHub Actions artifacts
- **ğŸš€ Production Deployment**: Seamless integration with Hugging Face Spaces
- **âš¡ Conflict Resolution**: Built-in git rebase and error handling

### ğŸ› ï¸ Required Secrets

For the pipeline to work, set these GitHub repository secrets:

- `HF_TOKEN`: Hugging Face API token for deployment

---

## ğŸ› ï¸ Development

### Local Development
```bash
# Run tests
pytest tests/ -v

# Code formatting
black src/ app/
flake8 src/ app/

# Generate dummy data
python scripts/generate_dummy_data.py
```

### Pipeline Testing
```bash
# Test pipeline locally (requires Act)
act -j train-and-deploy
```

---

## ğŸ“ˆ Model Training Pipeline

### Automated Workflow
1. **Data Preprocessing** - Automatic text cleaning and normalization
2. **Feature Engineering** - TF-IDF vectorization with optimal parameters
3. **Model Training** - Logistic Regression with hyperparameter optimization
4. **Evaluation** - Comprehensive metrics calculation and reporting
5. **Deployment** - Zero-downtime deployment to production

### Manual Override
Each pipeline step can also be run manually for development and debugging.

---

## ğŸ¤ Contributing

We welcome contributions! The automated pipeline will test your changes automatically.

### How to Contribute

1. **Fork** the repository
2. **Create** a feature branch (`git checkout -b feature/amazing-feature`)
3. **Commit** your changes (`git commit -m 'Add amazing feature'`)
4. **Push** to the branch (`git push origin feature/amazing-feature`)
5. **Open** a Pull Request
6. **âœ… Automated Testing**: Pipeline will automatically test your changes

---

## ğŸ“‹ Roadmap

- [x] âœ… Basic ML model implementation
- [x] âœ… FastAPI REST API
- [x] âœ… Automated MLOps pipeline with GitHub Actions
- [x] âœ… Auto-deployment to Hugging Face Spaces
- [x] âœ… Model evaluation metrics and reporting
- [ ] ğŸ”„ A/B testing framework
- [ ] ğŸ”„ Model performance monitoring dashboard
- [ ] ğŸ”„ Advanced deep learning models
- [ ] ğŸ”„ Multi-language support
- [ ] ğŸ”„ Docker containerization
- [ ] ğŸ”„ Kubernetes deployment

---

## ğŸš€ Live Demo

**Try the live model**: [Hugging Face Spaces](https://huggingface.co/spaces/minggo-commits/Gamble-Comment-Detector)

*Updated automatically with every model improvement!*

---

## ğŸ“„ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

---

## ğŸ™ Acknowledgments

- Thanks to all contributors who helped build this project
- Special recognition to the open-source ML community
- **MLOps Community** for best practices and tools
- Built with â¤ï¸ using FastAPI, scikit-learn, GitHub Actions, and Hugging Face

---

## ğŸ“ Support

- ğŸ› **Found a bug?** [Open an issue](https://github.com/minggo-commits/gamble-comment-detector/issues)
- ğŸ’¡ **Have a feature request?** [Start a discussion](https://github.com/minggo-commits/gamble-comment-detector/discussions)
- ğŸ“§ **Need help?** Contact the maintainers
- ğŸ¤– **Pipeline Issues?** Check [Actions tab](https://github.com/minggo-commits/gamble-comment-detector/actions)

---

<p align="center">
  <strong>â­ Don't forget to star this repository if you found it helpful!</strong><br>
  <e